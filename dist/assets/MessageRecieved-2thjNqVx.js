import{r as c,a as s,h as u}from"./index-C05QhGEP.js";import{l as i}from"./index-CGwCSIWv.js";import{A as m}from"./api-CigzIjai.js";const I=({onMessageReceived:r})=>{const e=c.useRef(null),n=s(),{apiKey:o}=m,a=localStorage.getItem("agentId");return c.useEffect(()=>(e.current||(e.current=i(o),e.current.on("receive_message",t=>{t&&t.message&&t.data.agentId==a&&t.data.role=="admin"&&!n.pathname.includes("/agent/agentChat")&&(u("You have recieved a new message!",{icon:"ðŸ””"}),r&&r(t))}),e.current.on("connect_error",t=>{console.error("WebSocket connection error:",t)})),()=>{e.current&&(e.current.disconnect(),e.current=null)}),[o,r,n.pathname]),null};export{I as default};
