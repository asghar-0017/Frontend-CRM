import{r as h,j as u,e as _,u as io,a as lo}from"./index-C05QhGEP.js";/* empty css                */import{f as co}from"./apiServices-BLiMT9Yd.js";import{S as po}from"./sweetalert2.all-I3mqL4O0.js";import{u as go}from"./OnlineAgents-IuEod27j.js";import{b as uo,s as k,u as Z,c as q}from"./DefaultPropsProvider-CK6xLYnL.js";import{_ as z,a as d}from"./Serializer-D5ddTVbr.js";import{d as G,g as J,e as v}from"./generateUtilityClasses-C5UaBTEU.js";import{r as fo,m as mo,a as vo,u as V}from"./useSlotProps-C1ZMSFiR.js";import{c as ho}from"./createSvgIcon-DJsEsuGB.js";import"./axios-B4uVmeYG.js";import"./api-CigzIjai.js";import"./Socket-BAmX9CkN.js";import"./index-CGwCSIWv.js";import"./middleware-COLfL0G6.js";const K=r=>{const t=h.useRef({});return h.useEffect(()=>{t.current=r}),t.current},bo=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],xo=["component","slots","slotProps"],yo=["component"];function Oo(r,t){const{className:o,elementType:e,ownerState:n,externalForwardedProps:a,getSlotOwnerState:l,internalForwardedProps:s}=t,g=z(t,bo),{component:f,slots:i={[r]:void 0},slotProps:p={[r]:void 0}}=a;z(a,xo);const c=i[r]||e,b=fo(p[r],n),C=mo(d({className:o},g,{externalForwardedProps:void 0,externalSlotProps:b})),{props:{component:w},internalRef:x}=C,R=z(C.props,yo),$=uo(x,b==null?void 0:b.ref,t.ref),S=l?l(R):{},y=d({},n,S),m=w,O=vo(c,d({},r==="root",!i[r]&&s,R,m&&{as:m},{ref:$}),y);return Object.keys(S).forEach(B=>{delete O[B]}),[c,O]}const Po=ho(u.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Co(r){return G("MuiAvatar",r)}J("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Ro=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],So=r=>{const{classes:t,variant:o,colorDefault:e}=r;return q({root:["root",o,e&&"colorDefault"],img:["img"],fallback:["fallback"]},Co,t)},$o=k("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(r,t)=>{const{ownerState:o}=r;return[t.root,t[o.variant],o.colorDefault&&t.colorDefault]}})(({theme:r})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:r.typography.fontFamily,fontSize:r.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(r.vars||r).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:d({color:(r.vars||r).palette.background.default},r.vars?{backgroundColor:r.vars.palette.Avatar.defaultBg}:d({backgroundColor:r.palette.grey[400]},r.applyStyles("dark",{backgroundColor:r.palette.grey[600]})))}]})),Bo=k("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(r,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),ko=k(Po,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(r,t)=>t.fallback})({width:"75%",height:"75%"});function wo({crossOrigin:r,referrerPolicy:t,src:o,srcSet:e}){const[n,a]=h.useState(!1);return h.useEffect(()=>{if(!o&&!e)return;a(!1);let l=!0;const s=new Image;return s.onload=()=>{l&&a("loaded")},s.onerror=()=>{l&&a("error")},s.crossOrigin=r,s.referrerPolicy=t,s.src=o,e&&(s.srcset=e),()=>{l=!1}},[r,t,o,e]),n}const zo=h.forwardRef(function(t,o){const e=Z({props:t,name:"MuiAvatar"}),{alt:n,children:a,className:l,component:s="div",slots:g={},slotProps:f={},imgProps:i,sizes:p,src:c,srcSet:b,variant:C="circular"}=e,w=z(e,Ro);let x=null;const R=wo(d({},i,{src:c,srcSet:b})),$=c||b,S=$&&R!=="error",y=d({},e,{colorDefault:!S,component:s,variant:C}),m=So(y),[O,B]=Oo("img",{className:m.img,elementType:Bo,externalForwardedProps:{slots:g,slotProps:{img:d({},i,f.img)}},additionalProps:{alt:n,src:c,srcSet:b,sizes:p},ownerState:y});return S?x=u.jsx(O,d({},B)):a||a===0?x=a:$&&n?x=n[0]:x=u.jsx(ko,{ownerState:y,className:m.fallback}),u.jsx($o,d({as:s,ownerState:y,className:_(m.root,l),ref:o},w,{children:x}))});function Ao(r){const{badgeContent:t,invisible:o=!1,max:e=99,showZero:n=!1}=r,a=K({badgeContent:t,max:e});let l=o;o===!1&&t===0&&!n&&(l=!0);const{badgeContent:s,max:g=e}=l?a:r,f=s&&Number(s)>g?`${g}+`:s;return{badgeContent:s,invisible:l,max:g,displayValue:f}}function No(r){return G("MuiBadge",r)}const P=J("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Io=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],M=10,T=4,jo=r=>{const{color:t,anchorOrigin:o,invisible:e,overlap:n,variant:a,classes:l={}}=r,s={root:["root"],badge:["badge",a,e&&"invisible",`anchorOrigin${v(o.vertical)}${v(o.horizontal)}`,`anchorOrigin${v(o.vertical)}${v(o.horizontal)}${v(n)}`,`overlap${v(n)}`,t!=="default"&&`color${v(t)}`]};return q(s,No,l)},Mo=k("span",{name:"MuiBadge",slot:"Root",overridesResolver:(r,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),To=k("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(r,t)=>{const{ownerState:o}=r;return[t.badge,t[o.variant],t[`anchorOrigin${v(o.anchorOrigin.vertical)}${v(o.anchorOrigin.horizontal)}${v(o.overlap)}`],o.color!=="default"&&t[`color${v(o.color)}`],o.invisible&&t.invisible]}})(({theme:r})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:r.typography.fontFamily,fontWeight:r.typography.fontWeightMedium,fontSize:r.typography.pxToRem(12),minWidth:M*2,lineHeight:1,padding:"0 6px",height:M*2,borderRadius:M,zIndex:1,transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=r.vars)!=null?t:r).palette).filter(o=>{var e,n;return((e=r.vars)!=null?e:r).palette[o].main&&((n=r.vars)!=null?n:r).palette[o].contrastText}).map(o=>({props:{color:o},style:{backgroundColor:(r.vars||r).palette[o].main,color:(r.vars||r).palette[o].contrastText}})),{props:{variant:"dot"},style:{borderRadius:T,height:T*2,minWidth:T*2,padding:0}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${P.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${P.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${P.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${P.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${P.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="right"&&o.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${P.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="top"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${P.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:o})=>o.anchorOrigin.vertical==="bottom"&&o.anchorOrigin.horizontal==="left"&&o.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${P.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.leavingScreen})}}]}}),_o=h.forwardRef(function(t,o){var e,n,a,l,s,g;const f=Z({props:t,name:"MuiBadge"}),{anchorOrigin:i={vertical:"top",horizontal:"right"},className:p,component:c,components:b={},componentsProps:C={},children:w,overlap:x="rectangular",color:R="default",invisible:$=!1,max:S=99,badgeContent:y,slots:m,slotProps:O,showZero:B=!1,variant:A="standard"}=f,Q=z(f,Io),{badgeContent:F,invisible:X,max:Y,displayValue:oo}=Ao({max:S,invisible:$,badgeContent:y,showZero:B}),ro=K({anchorOrigin:i,color:R,overlap:x,variant:A,badgeContent:y}),D=X||F==null&&A!=="dot",{color:to=R,overlap:eo=x,anchorOrigin:ao=i,variant:E=A}=D?ro:f,L=E!=="dot"?oo:void 0,N=d({},f,{badgeContent:F,invisible:D,max:Y,displayValue:L,showZero:B,anchorOrigin:ao,color:to,overlap:eo,variant:E}),U=jo(N),W=(e=(n=m==null?void 0:m.root)!=null?n:b.Root)!=null?e:Mo,H=(a=(l=m==null?void 0:m.badge)!=null?l:b.Badge)!=null?a:To,I=(s=O==null?void 0:O.root)!=null?s:C.root,j=(g=O==null?void 0:O.badge)!=null?g:C.badge,no=V({elementType:W,externalSlotProps:I,externalForwardedProps:Q,additionalProps:{ref:o,as:c},ownerState:N,className:_(I==null?void 0:I.className,U.root,p)}),so=V({elementType:H,externalSlotProps:j,ownerState:N,className:_(U.badge,j==null?void 0:j.className)});return u.jsxs(W,d({},no,{children:[w,u.jsx(H,d({},so,{children:L}))]}))}),Fo=()=>{const[r,t]=h.useState(window.innerWidth<=768);return h.useEffect(()=>{const o=()=>{t(window.innerWidth<=768)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]),r},or=()=>{const r=io(),t=lo(),[o,e]=h.useState([]),{onlineAgents:n}=go(i=>({onlineAgents:i.onlineAgents})),a=Fo();h.useEffect(()=>{a&&po.fire({title:"Under Construction",text:"Mobile view of messages is under construction",icon:"info",confirmButtonText:"Okay"}).then(()=>{r("/")})},[a,r]);const l="get-agent",g=t.pathname.split("/").pop();if(h.useEffect(()=>{if(!a){const i=localStorage.getItem("token");(async()=>{try{const c=await co(l,i);e(c)}catch(c){console.error("Error fetching data:",c)}})()}},[a]),a)return null;const f=k(_o)(({theme:i,online:p})=>({"& .MuiBadge-dot":{backgroundColor:p?"#44B700":"gray"},"& .MuiBadge-badge":{backgroundColor:p?"#44B700":"gray",color:p?"#44B700":"gray",boxShadow:`0 0 0 2px ${i.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",border:"1px solid currentColor",content:'""',...p?{animation:"ripple 1.2s infinite ease-in-out"}:{}}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}));return u.jsx("div",{className:"sidebar",children:u.jsx("div",{className:"sidebar-main",children:o.map((i,p)=>{const c=n.includes(String(i.agentId));return u.jsxs("div",{className:`sidebar-content ${g==i.agentId?"active":""}`,onClick:()=>r(`/messages/agentChat/${i.agentId}`),children:[u.jsx(f,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",online:c,children:u.jsx(zo,{alt:`${i.firstName} ${i.lastName}`,src:"/static/images/avatar/1.jpg"})}),u.jsx("span",{className:"sidebar-span",children:`${i.firstName} ${i.lastName}`})]},p)})})})};export{or as default};
