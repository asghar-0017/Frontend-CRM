import{d as s,r}from"./index-C05QhGEP.js";import{l as i}from"./index-CGwCSIWv.js";import{A as c}from"./api-CigzIjai.js";import{p as l}from"./middleware-COLfL0G6.js";import{i as a,e as u}from"./Socket-BAmX9CkN.js";const f=s(l(e=>({onlineAgents:[],setOnlineAgents:t=>e({onlineAgents:t})}),{name:"onlineAgents"})),E=()=>{const e=r.useRef(null),{apiKey:t}=c,{setOnlineAgents:o}=f(n=>({setOnlineAgents:n.setOnlineAgents}));return r.useEffect(()=>(e.current||(e.current=i(t),e.current.on("online_agents",n=>{Array.isArray(n)&&o(n)}),e.current.on("connect_error",n=>{console.error("WebSocket connection error:",n)})),()=>{e.current&&(e.current.disconnect(),e.current=null)}),[t,o]),null},d=()=>{a(),r.useEffect(()=>{const e=localStorage.getItem("agentId");e&&u("agent_connected",e)},[])};export{d as E,E as O,f as u};
