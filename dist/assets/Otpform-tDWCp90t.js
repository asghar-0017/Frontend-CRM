import{g as J,r as $,u as M,j as l}from"./index-C05QhGEP.js";/* empty css              */import{S as N}from"./sweetalert2.all-I3mqL4O0.js";import{a as Q}from"./axios-B4uVmeYG.js";import{A as X}from"./api-CigzIjai.js";import{_ as V,a as y}from"./Serializer-D5ddTVbr.js";import{g as Z,C as ee,i as te,s as re,c as oe,a as se,b as ne}from"./generateUtilityClasses-C5UaBTEU.js";import{c as ae}from"./createBox-DKObizbn.js";var U={exports:{}},ie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",le=ie,ce=le;function K(){}function G(){}G.resetWarningCache=K;var pe=function(){function e(p,u,i,f,m,a){if(a!==ce){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function r(){return e}var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:G,resetWarningCache:K};return o.PropTypes=o,o};U.exports=pe();var ue=U.exports;const F=J(ue),fe=Z("MuiBox",["root"]),I=ae({defaultClassName:fe.root,generateClassName:ee.generate}),me=["ownerState"],de=["variants"],he=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function ye(e){return Object.keys(e).length===0}function xe(e){return typeof e=="string"&&e.charCodeAt(0)>96}function B(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const ve=oe(),ge=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function R({defaultTheme:e,theme:r,themeId:o}){return ye(r)?e:r[o]||r}function Se(e){return e?(r,o)=>o[e]:null}function D(e,r){let{ownerState:o}=r,p=V(r,me);const u=typeof e=="function"?e(y({ownerState:o},p)):e;if(Array.isArray(u))return u.flatMap(i=>D(i,y({ownerState:o},p)));if(u&&typeof u=="object"&&Array.isArray(u.variants)){const{variants:i=[]}=u;let m=V(u,de);return i.forEach(a=>{let c=!0;typeof a.props=="function"?c=a.props(y({ownerState:o},p,o)):Object.keys(a.props).forEach(b=>{(o==null?void 0:o[b])!==a.props[b]&&p[b]!==a.props[b]&&(c=!1)}),c&&(Array.isArray(m)||(m=[m]),m.push(typeof a.style=="function"?a.style(y({ownerState:o},p,o)):a.style))}),m}return u}function be(e={}){const{themeId:r,defaultTheme:o=ve,rootShouldForwardProp:p=B,slotShouldForwardProp:u=B}=e,i=f=>se(y({},f,{theme:R(y({},f,{defaultTheme:o,themeId:r}))}));return i.__mui_systemSx=!0,(f,m={})=>{te(f,h=>h.filter(w=>!(w!=null&&w.__mui_systemSx)));const{name:a,slot:c,skipVariantsResolver:b,skipSx:A,overridesResolver:n=Se(ge(c))}=m,t=V(m,he),s=b!==void 0?b:c&&c!=="Root"&&c!=="root"||!1,d=A||!1;let x,v=B;c==="Root"||c==="root"?v=p:c?v=u:xe(f)&&(v=void 0);const g=re(f,y({shouldForwardProp:v,label:x},t)),j=h=>typeof h=="function"&&h.__emotion_real!==h||ne(h)?w=>D(h,y({},w,{theme:R({theme:w.theme,defaultTheme:o,themeId:r})})):h,L=(h,...w)=>{let E=j(h);const P=w?w.map(j):[];a&&n&&P.push(T=>{const S=R(y({},T,{defaultTheme:o,themeId:r}));if(!S.components||!S.components[a]||!S.components[a].styleOverrides)return null;const k=S.components[a].styleOverrides,C={};return Object.entries(k).forEach(([H,Y])=>{C[H]=D(Y,y({},T,{theme:S}))}),n(T,C)}),a&&!s&&P.push(T=>{var S;const k=R(y({},T,{defaultTheme:o,themeId:r})),C=k==null||(S=k.components)==null||(S=S[a])==null?void 0:S.variants;return D({variants:C},y({},T,{theme:k}))}),d||P.push(i);const W=P.length-w.length;if(Array.isArray(h)&&W>0){const T=new Array(W).fill("");E=[...h,...T],E.raw=[...h.raw,...T]}const q=g(E,...P);return f.muiName&&(q.muiName=f.muiName),q};return g.withConfig&&(L.withConfig=g.withConfig),L}}const we=be();function z({separator:e,length:r,value:o,onChange:p,onSendOTP:u}){const i=$.useRef(new Array(r).fill(null)),f=n=>{i.current[n].focus()},m=n=>{i.current[n].select()},a=(n,t)=>{switch(n.key){case"ArrowUp":case"ArrowDown":case" ":n.preventDefault();break;case"ArrowLeft":n.preventDefault(),t>0&&(f(t-1),m(t-1));break;case"ArrowRight":n.preventDefault(),t<r-1&&(f(t+1),m(t+1));break;case"Delete":n.preventDefault(),p(s=>s.slice(0,t)+s.slice(t+1));break;case"Backspace":n.preventDefault(),t>0&&(f(t-1),m(t-1)),p(s=>s.slice(0,t)+s.slice(t+1));break}},c=(n,t)=>{const s=n.target.value;let d=0;for(;d<=t&&(i.current[d].value&&d<t);)d+=1;p(x=>{const v=x.split(""),g=s[s.length-1];return v[d]=g,v.join("")}),s!==""&&t<r-1&&f(t+1)},b=(n,t)=>{m(t)},A=(n,t)=>{n.preventDefault();const s=n.clipboardData;if(s.types.includes("text/plain")){let d=s.getData("text/plain");d=d.substring(0,r).trim();let x=0;for(;x<=t&&(i.current[x].value&&x<t);)x+=1;const v=o.split("");for(let g=x;g<r;g+=1){const j=d[g-x]??" ";v[g]=j}p(v.join(""))}};return l.jsx(I,{sx:{display:"flex",gap:1,alignItems:"center"},children:new Array(r).fill(null).map((n,t)=>l.jsxs($.Fragment,{children:[l.jsx(Pe,{"aria-label":`Digit ${t+1} of OTP`,ref:s=>{i.current[t]=s},onKeyDown:s=>a(s,t),onChange:s=>c(s,t),onClick:s=>b(s,t),onPaste:s=>A(s,t),value:o[t]??""}),t===r-1?null:e]},t))})}z.propTypes={length:F.number.isRequired,onChange:F.func.isRequired,separator:F.node,value:F.string.isRequired,onSendOTP:F.func.isRequired};function Te(){const[e,r]=$.useState(""),o=M(),{apiKey:p}=X,u=async()=>{try{const i=await Q.post(`${p}/verify-reset-code`,{code:e});console.log(i),i.status===200?(N.fire({icon:"success",title:"Success",text:"OTP verified successfully!"}),o("/changepassword")):N.fire({icon:"error",title:"Error",text:"Invalid OTP!"})}catch(i){console.error("Login Error:",i.message),N.fire({icon:"error",title:"Error",text:"Something went wrong. Please try again later."})}};return l.jsx(l.Fragment,{children:l.jsxs(I,{sx:{display:"flex",flexDirection:"column",gap:5,marginTop:"20px"},children:[l.jsx(z,{separator:l.jsx("span",{children:"-"}),value:e,onChange:r,length:6,onSendOTP:u}),l.jsxs("span",{children:["Entered value: ",e]}),l.jsx("div",{style:{textAlign:"center"},children:l.jsx("span",{style:{backgroundColor:"#74bed7",border:"none",padding:"10px 16px",cursor:"pointer"},onClick:u,children:"Send OTP"})})]})})}const _={100:"#DAECFF",200:"#80BFFF",400:"#3399FF",500:"#007FFF",600:"#0072E5",700:"#0059B2"},O={50:"#F3F6F9",100:"#E5EAF2",200:"#DAE2ED",300:"#C7D0DD",400:"#B0B8C4",500:"#9DA8B7",600:"#6B7A90",700:"#434D5B",800:"#303740",900:"#1C2025"},Pe=we("input")(({theme:e})=>`
  width: 40px;
  font-family: 'IBM Plex Sans', sans-serif;
  font-size: 0.875rem;
  font-weight: 400;
  line-height: 1.5;
  padding: 8px 0px;
  border-radius: 8px;
  text-align: center;
  color: ${e.palette.mode==="dark"?O[300]:O[900]};
  background: ${e.palette.mode==="dark"?O[900]:"#fff"};
  border: 1px solid ${e.palette.mode==="dark"?O[700]:O[200]};
  box-shadow: 0px 2px 4px ${e.palette.mode==="dark"?"rgba(0,0,0, 0.5)":"rgba(0,0,0, 0.05)"};

  &:hover {
    border-color: ${_[400]};
  }

  &:focus {
    border-color: ${_[400]};
    box-shadow: 0 0 0 3px ${e.palette.mode==="dark"?_[600]:_[200]};
  }

  // firefox
  &:focus-visible {
    outline: 0;
  }
`),Ae=()=>(M(),l.jsx("div",{children:l.jsx("div",{className:"form",children:l.jsxs("form",{className:"form_main",children:[l.jsx("p",{className:"heading",children:"Admin OTP"}),l.jsx("div",{className:"inputContainer",children:l.jsx(Te,{})})]})})}));export{Ae as default};
